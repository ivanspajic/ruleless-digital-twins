import typing
from rdflib import BNode, Literal, Graph, URIRef
from rdflib.namespace import Namespace, RDF, RDFS, OWL, XSD
from RDTBindings import *

g = Graph()
MINE = Namespace("http://www.semanticweb.org/ivans/ontologies/2025/instance-model-vs#")

# g.add((BNode(), RDFS["annotation"], Literal("Generated by SimpleNordpool.py", datatype=XSD.string)))
g.add((URIRef(str(MINE)), OWL.imports, URIRef(str(RDT))))

roomO = Platform(g, MINE["Test"])
fmuO = FMU(g, MINE["TestFMU"], 900) # 15 mins
roomO.addFMU(g, fmuO)

elpriceO = ObservableProperty(g, MINE["ElPrice"])
restriction = elpriceO.restriction

elpriceNFO = ObservableProperty(g, MINE["ElPriceNotFound"], restriction) # TODO: better implicit sharing?
# Not connected yet

priceMeasureO = Measure(g, MINE["PriceMeasure"], restriction)
priceSensorO = Sensor(g, MINE["PriceSensor"], elpriceO)

priceProcedureO = Procedure(g, MINE["PriceProcedure"], priceMeasureO, priceSensorO)

# nordpoolSensorO = Sensor(g, "Nordpool", [elpriceO, elpriceNFO])

dummyMeasure = Measure(g, MINE["DummyMeasure"], restriction)
dummyProcedure = Procedure(g, MINE["DummyProcedure"], dummyMeasure)
dummyProperty = ObservableProperty(g, MINE["DummyProperty"], restriction)
dummySensor = Sensor(g, MINE["DummySensor"], dummyProperty)

output = g.serialize(destination=None)
print(output)