import typing
from rdflib import BNode, Literal, Graph, URIRef
from rdflib.namespace import Namespace, RDF, RDFS, OWL, XSD
from RDTBindings import *

g = Graph()
# g.parse("ruleless-digital-twins/models-and-rule s/instance-model-1.ttl")
# SAREF = Namespace("https://saref.etsi.org/core/")
# OWL =  Namespace("http://www.w3.org/2002/07/owl#")
# RDF = Namespace("http://www.w3.org/1999/02/22-rdf-syntax-ns#")
# RDT = Namespace("http://www.semanticweb.org/ivans/ontologies/2025/ruleless-digital-twins/")
MINE = Namespace("http://www.semanticweb.org/ivans/ontologies/2025/instance-model-vs#")
# SOSA = Namespace("http://www.w3.org/ns/sosa/")
# SSN = Namespace("http://www.w3.org/ns/ssn/")

# g.add((BNode(), RDFS["annotation"], Literal("Generated by SimpleNordpool.py", datatype=XSD.string)))
g.add((URIRef(str(MINE)), OWL.imports, URIRef(str(RDT))))

roomO = Platform(g, MINE["Test"])
fmuO = FMU(g, MINE["TestFMU"], 900) # 15 mins
roomO.addFMU(g, fmuO)

elpriceO = ObservableProperty(g, MINE["ElPrice"])
restriction = elpriceO.restriction

elpriceNFO = ObservableProperty(g, MINE["ElPriceNotFound"], restriction) # TODO: better implicit sharing?
priceMeasureO = Measure(g, MINE["PriceMeasure"], restriction)
priceSensorO = Sensor(g, MINE["PriceSensor"], elpriceO)

# priceProcedureO = Procedure(g, MINE["PriceProcedure"], priceMeasureO, priceSensorO)

# nordpoolSensorO = Sensor(g, "Nordpool", [elpriceO, elpriceNFO])
output = g.serialize(destination=None)
print(output)